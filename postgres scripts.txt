select _projectid, count(giving_page_id) as giving_count from givingproj 
group by _projectid order by giving_count desc limit 10;

ALTER TABLE projects
  ALTER COLUMN param1 TYPE integer USING param1::integer;

COPY projectstest FROM '/data/donors_csvs/projects_xx' DELIMITER ',' QUOTE '"' CSV;

create table projnotinres as 
select proj._projectid, proj.date_posted from projects proj left join resources res 
on res._projectid = proj._projectid 
where res._projectid is null;

select date_posted from projects where 
_projectid = 'a1da128307df1c34dda7db40b7fd0ccb' or  
_projectid = '5e965e0c340fce598d5fffde2d4ffebd' or
_projectid = 'f3bb99f0c08eb6c2a3ee7f3a8b29db8d' or
_projectid = 'a013b59bb839c24d2a357a42a10c63c5' 

create table projnotingivingproj as 
select proj._projectid, proj.funding_status from projects proj left join givingproj giveproj 
on giveproj._projectid = proj._projectid 
where giveproj._projectid is null;


create table projnotindonorations as 
select proj._projectid from projects proj left join donations don 
on don._projectid = proj._projectid 
where don._projectid is null;


create table proj_in_givingproj_not_in_proj as 
select giveproj._projectid from givingproj giveproj left join projects proj 
on giveproj._projectid = proj._projectid 
where proj._projectid is null;

select A._projectid from proj_in_givingproj_not_in_proj A
inner join donations B on 
A._projectid = B._projectid;

create table projsub as select _projectid, 
total_price_including_optional_support as total, 
total_price_excluding_optional_support as totalminopt, 
num_donors as donors, total_donations as totdon, funding_status as fundstat, students_reached as studnt_reach
from projects;

select max(total-totalminopt) as largest, _projectid from projsub where fundstat = 'completed' group by _projectid order by largest desc limit 5;

select 
total_price_excluding_optional_support,
total_price_including_optional_support,
students_reached,
total_donations,
num_donors,
funding_status,
date_posted,
date_completed
from projects where 
_projectid = 'f97e8d34302f759c08ccc981a8b6bd74' 
or _projectid = '6e078025899bcb6e18565445727c4d8a'
or _projectid = '5279c422a1b79369a3a47887f238b126'
or _projectid = 'bbbc6cccccd3c1bc8c44ec494bb6cf23';

select 
total_price_excluding_optional_support,
total_price_including_optional_support,
students_reached,
total_donations,
num_donors,
funding_status,
date_posted,
date_completed
from projects where 
_projectid = 'bbbc6cccccd3c1bc8c44ec494bb6cf23'
or _projectid = 'd068f9602e61c2874a4c69f85839e758'
or _projectid = 'b75b58548f5087829d3f86271d9bfe39'
or _projectid = '6ef943ad192a1afc849311485e9e70f6';

select * from projects where
_projectid = 'd068f9602e61c2874a4c69f85839e758'
or _projectid = 'b75b58548f5087829d3f86271d9bfe39'


select _projectid, _donor_acctid, donation_to_project from donations where
_projectid = 'd068f9602e61c2874a4c69f85839e758'
or _projectid = 'b75b58548f5087829d3f86271d9bfe39' order by _projectid, _donor_acctid;



reallocated
live
completed
expired






